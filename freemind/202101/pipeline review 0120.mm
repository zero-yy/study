<map version="1.0.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1611217890342" ID="ID_153394888" MODIFIED="1611217907998" TEXT="pipeline review 0121">
<node CREATED="1611219216293" ID="ID_169245451" MODIFIED="1611219230829" POSITION="right" TEXT="&#x7c7b;&#x4f3c;&#x4e8e;redis ">
<node CREATED="1611219231228" ID="ID_32369934" MODIFIED="1611219257392" TEXT="&#x8bf7;&#x6c42;&#x5728;&#x670d;&#x52a1;&#x5668;&#x6392;&#x961f;&#xff1f;"/>
<node CREATED="1611219264303" ID="ID_1864343230" MODIFIED="1611219271343" TEXT="&#x8fdb;&#x884c;seq &#x6709;&#x5e8f;&#x5224;&#x5b9a;"/>
<node CREATED="1611219271849" ID="ID_248083307" MODIFIED="1611219279712" TEXT="&#x8fdb;&#x884c;seq &#x91cd;&#x590d;&#x5224;&#x5b9a;">
<node CREATED="1611219280298" ID="ID_414360524" MODIFIED="1611219283267" TEXT="resp cache"/>
</node>
<node CREATED="1611219257721" ID="ID_1879912013" MODIFIED="1611219262762" TEXT="&#x5904;&#x7406;&#x5b8c;&#x4e4b;&#x540e;&#x4e00;&#x8d77;&#x53d1;&#x56de;"/>
</node>
<node CREATED="1611221613314" ID="ID_429020481" MODIFIED="1611221615383" POSITION="right" TEXT="tips">
<node CREATED="1611221615383" ID="ID_283915747" MODIFIED="1611281449456" TEXT="benchmark &#x5e76;&#x884c;">
<node CREATED="1611221621820" ID="ID_584874495" MODIFIED="1611221622692" TEXT="RunParallel"/>
<node CREATED="1611221623227" ID="ID_1950222937" MODIFIED="1611221626457" TEXT="&#x9002;&#x5408;io&#x6d4b;&#x8bd5;"/>
</node>
<node CREATED="1611281450367" ID="ID_182639714" MODIFIED="1611281463389" TEXT="fmt.Errorf %w wrap error ">
<node CREATED="1611281463762" ID="ID_982458928" MODIFIED="1611281482650" TEXT="err := fmt.errorf(&quot;xxx %w&quot;, errX)"/>
<node CREATED="1611281484207" ID="ID_1567850335" MODIFIED="1612232116430" TEXT="if errors.Is(err, errX) ..">
<node CREATED="1612232193230" ID="ID_894323912" MODIFIED="1612232210273" TEXT="&#x5982;&#x679c;err&#x91cc;wrap&#x4e86;errX&#xff0c;&#x90a3;&#x4e48;&#x4e5f;&#x8fd4;&#x56de;true"/>
</node>
<node CREATED="1612232001432" ID="ID_54433299" MODIFIED="1612232098669" TEXT="xe := fmt.Errorf(&quot;xxx %w&quot;, e);  xe is a wrapErr; so xe.Unwrap() is original error"/>
</node>
<node CREATED="1611285756596" ID="ID_677839359" MODIFIED="1611285761049" TEXT="chan">
<node CREATED="1611285761049" ID="ID_763603286" MODIFIED="1611285766565" TEXT="close(nil) &#x4f1a;&#x62a5;&#x9519;"/>
<node CREATED="1611285766899" ID="ID_1221473797" MODIFIED="1611285809654" TEXT="c = nil; select case &lt;-c: &#x4e0d;&#x4f1a;&#x62a5;&#x9519;&#xff0c;&#x4f46;&#x4f1a;&#x6302;&#x8d77;"/>
</node>
</node>
<node CREATED="1611220553810" ID="ID_1826234080" MODIFIED="1611220569323" POSITION="left" TEXT="&#x591a;&#x5ba2;&#x6237;&#x7aef;">
<node CREATED="1611221099807" ID="ID_1467248398" MODIFIED="1611221112365" TEXT="sessionKey&#x5f52;&#x4e00;"/>
<node CREATED="1611221910079" ID="ID_1055810459" MODIFIED="1611221928050" TEXT="sessionKey + seqId as key"/>
</node>
<node CREATED="1611220569530" ID="ID_478003200" MODIFIED="1611220571891" POSITION="left" TEXT="&#x5206;&#x5e03;&#x5f0f;&#x670d;">
<node CREATED="1611221132431" ID="ID_1236908283" MODIFIED="1611221139304" TEXT="&#x5171;&#x4eab;redis&#x6216;pipeline&#x5bf9;&#x8c61;"/>
<node CREATED="1611221219254" ID="ID_944046190" MODIFIED="1612228978282" TEXT="&#x901a;&#x8fc7;group&#x6982;&#x5ff5;&#x8ba9;&#x591a;&#x4e2a;&#x670d;&#x52a1;&#x6302;&#x5230;&#x4e00;&#x4e2a;group&#x4e0a;&#xff1a;pipeline"/>
<node CREATED="1611221342604" ID="ID_355669491" MODIFIED="1611221358700" TEXT="&#x53ef;&#x4ee5;&#x901a;&#x8fc7;serverKey &#x7ed1;&#x5b9a;&#x5230;&#x7279;&#x5b9a;&#x670d;&#x4e0a;"/>
<node CREATED="1611230768996" ID="ID_1112692777" MODIFIED="1611230770608" TEXT="&#x670d;">
<node CREATED="1611230770608" ID="ID_1305659413" MODIFIED="1611230774500" TEXT="pipeline">
<node CREATED="1611230781712" ID="ID_1092166303" MODIFIED="1611230784040" TEXT="sessionKey">
<node CREATED="1611230787742" ID="ID_815596426" MODIFIED="1611230789515" TEXT="seqId">
<node CREATED="1611230789827" ID="ID_1344240392" MODIFIED="1611230791404" TEXT="chan?"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1611220572290" ID="ID_1458271050" MODIFIED="1611220587294" POSITION="left" TEXT="pipeline&#x901a;&#x8fc7;&#x5185;&#x5b58;&#x6216;redis&#x5728;&#x670d;&#x52a1;&#x5668;&#x505a;&#x5e8f;&#x5217;&#x5316;">
<node CREATED="1611221115604" ID="ID_330107661" MODIFIED="1611221129496" TEXT="sessionKey + seq Id &#x505a;&#x6709;&#x5e8f;&#x5316;"/>
</node>
<node CREATED="1611296483736" ID="ID_1935359743" MODIFIED="1611297200853" POSITION="left" TEXT="&#x5355;&#x4e2a;&#x670d;&#xff0c;&#x80fd;&#x6392;&#x961f;&#x6709;&#x5e8f;&#xff1f;">
<node CREATED="1611297201946" ID="ID_1879574284" MODIFIED="1611297254171" TEXT="&#x5904;&#x7406;&#x5b8c;&#x4e4b;&#x540e;&#xff0c;&#x5bf9;wait chan&#x6570;&#x7ec4;&#x7684;id&#x8fdb;&#x884c;close&#x901a;&#x77e5;&#xff0c;&#x89e6;&#x53d1;&#x540e;&#x7eed;&#x5904;&#x7406; "/>
<node CREATED="1611297255198" ID="ID_1543313576" MODIFIED="1611297265772" TEXT="chan &#x8d1f;&#x8d23;&#x5173;&#x8054;&#x88c5;&#x586b;&#xff0c;&#xff0c;wait&#x6302;&#x8d77;&#x4e2d;&#xff0c;running &#x8fd0;&#x884c;&#x4e2d;"/>
</node>
<node CREATED="1611281972826" ID="ID_27230169" MODIFIED="1611281974943" POSITION="left" TEXT="provider">
<node CREATED="1611281974944" ID="ID_749089790" MODIFIED="1611281981740" TEXT="1:1 server key"/>
<node CREATED="1611281982278" ID="ID_996265547" MODIFIED="1611281986826" TEXT="1:n pipeline">
<node CREATED="1611281987091" ID="ID_1398370768" MODIFIED="1611282022224" TEXT="sessionKey : pipelineGetterFunc"/>
<node CREATED="1611281995265" ID="ID_1356837416" MODIFIED="1611282150576" TEXT="sync.Map &#x914d;&#x5408; getter!&#x6a21;&#x5f0f;">
<icon BUILTIN="messagebox_warning"/>
<icon BUILTIN="messagebox_warning"/>
<icon BUILTIN="messagebox_warning"/>
<node CREATED="1611282040384" ID="ID_1714737535" MODIFIED="1611282224329" TEXT="1 &#x5982;&#x679c;&#x6ca1;&#x6709;load&#xff0c;&#x5219;&#x521d;&#x59cb;&#x5316;&#xff0c;&#x7136;&#x540e;&#x5148;&#x5360;&#x4f4d;(LoadOrStore&#x5360;&#x4f4d;)&#xff0c;&#x5e26;&#x6709;waiter&#x7684;getter"/>
<node CREATED="1611282062075" ID="ID_744674000" MODIFIED="1611282099489" TEXT="2 &#x7136;&#x540e;&#x505a;&#x521d;&#x59cb;&#x5316;&#xff0c;done signal"/>
<node CREATED="1611282083032" ID="ID_1248420648" MODIFIED="1611282109375" TEXT="3 &#x5176;&#x4ed6;&#x7684;&#x8bbf;&#x95ee;&#x8005;&#x53ef;&#x4ee5;&#x62ff;&#x5230;&#x65b0;&#x7684;&#x4e86;"/>
<node CREATED="1611282110598" ID="ID_1688136642" MODIFIED="1611282132713" TEXT="4 &#x91cd;&#x65b0;store&#x4e00;&#x6b21;&#xff0c;&#x505a;&#x4f18;&#x5316;&#x5904;&#x7406;&#xff0c;&#x4ee5;&#x540e;&#x7684;&#x8bbf;&#x95ee;&#x8005; &#x6027;&#x80fd;&#x63d0;&#x5347;&#xff0c;&#x4e0d;&#x7528;wait&#x4e86;"/>
<node CREATED="1612229182777" ID="ID_1903879137" MODIFIED="1612229185600" TEXT="tips">
<node CREATED="1612229185852" ID="ID_1920344576" MODIFIED="1612229196417" TEXT="LoadOrStore&#x5e26;&#x6765;&#x7684;&#x539f;&#x5b50;&#x6027;">
<node CREATED="1612229212282" ID="ID_1988173646" MODIFIED="1612229225938" TEXT="&#x6709;&#x5219;&#x52a0;&#x8f7d;&#xff0c;&#x65e0;&#x5219;&#x5b58;&#x50a8;"/>
</node>
<node CREATED="1612231713861" ID="ID_1540896057" MODIFIED="1612231743775" TEXT="LoadOrStore url -&gt;&gt; struct &#x7684;sync.Map">
<node CREATED="1612231812386" ID="ID_1246622487" MODIFIED="1612231840451" TEXT="LoadOrStore + sync.Map + sync.WaitGroup"/>
</node>
<node CREATED="1612231744028" ID="ID_836103834" MODIFIED="1612231750076" TEXT="&#x53ef;&#x4ee5;&#x4f7f;&#x7528;once&#x66ff;&#x4ee3; ">
<node CREATED="1612231796693" ID="ID_757569673" MODIFIED="1612231806208" TEXT="once + LoadOrStore + &#x95ed;&#x5305;"/>
</node>
<node CREATED="1612231879331" ID="ID_1196219352" MODIFIED="1612231879980" TEXT="https://xnum.github.io/2018/11/syncmap-loadorstore"/>
</node>
</node>
</node>
</node>
</node>
</map>
